<div class="portfolio-shell">
  @if (loading) {
    <p class="empty-msg">Loading portfolio...</p>
  }

  @if (error) {
    <p class="error">{{ error }}</p>
  }

  @if (!loading && portfolio.length === 0) {
    <p class="empty-msg">No stocks in your portfolio yet.</p>
  }

  @for (holding of portfolio; track holding.id) {
    <div class="portfolio-card">
      <app-stock-card
        [stock]="holding.stock || holding"
        [shares]="holding.shares"
        [avgCost]="holding.avg_cost"
        [showRemove]="true"
        (remove)="removeFromPortfolio(holding.id)">
      </app-stock-card>

      <!-- Chart -->
      <canvas
        *ngIf="holding.chartData"
        baseChart
        [data]="holding.chartData"
        [options]="{ responsive: true, plugins: { legend: { display: false }}}"
        [type]="'line'">
      </canvas>
    </div>
  }
</div>

<div class="search-container">
  <h2>Search for a User Portfolio</h2>

  <form (ngSubmit)="search()" class="search-bar">
    <input
      type="text"
      [(ngModel)]="publicId"
      name="publicId"
      placeholder="Enter Public ID"
      required
    />
    <button type="submit">Search</button>
  </form>

  @if (loading) {
    <p>Loading...</p>
  }

  @if (error) {
    <p class="error">{{ error }}</p>
  }

  @if (!loading && results.length === 0 && !error) {
    <p class="empty-msg">No portfolio found for this user.</p>
  }

  @if (results.length) {
    <h3>Results for User {{ publicId }}</h3>
    <div class="portfolio-search-results">
      @for (holding of results; track $index) {
        <app-stock-card
          [stock]="holding.stock"
          [shares]="holding.shares"
          [avgCost]="holding.avg_cost"
          [showRemove]="false">
        </app-stock-card>
      }
    </div>
  }
</div>

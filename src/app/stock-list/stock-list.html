<div class="stock-list-chips">
  <input
    class="stock-search-input"
    [(ngModel)]="search"
    (input)="onSearchChange()"
    placeholder="Search stocks..."
    type="text"
  />

  <div class="chips-grid">
    <div
      class="stock-chip"
      *ngFor="let stock of stocks; let i = index; trackBy: trackStock"
      [class.expanded]="expanded === i"
    >
      <div class="stock-chip-main" (click)="expandChip(i)">
        <div class="stock-chip-symbol">{{ stock.symbol }}</div>
        <div class="stock-chip-name">{{ stock.name }}</div>
        <div class="stock-chip-sparkline">
          <!-- Optional: Mini SVG sparkline here in the future! -->
        </div>
      </div>
      <div class="stock-chip-actions">
        <button (click)="addToPortfolio(stock)" [disabled]="stock.added">
          {{ stock.added ? 'Added' : 'Add' }}
        </button>
        <button (click)="showChart(i, stock.symbol)">
          Data
        </button>
      </div>
      <div class="stock-chip-chart" *ngIf="expanded === i && showChartFor === i">
        <app-tradingview-mini [symbol]="'NASDAQ:' + stock.symbol"></app-tradingview-mini>
      </div>
    </div>
  </div>
</div>

<div class="stock-list">
  <input 
    type="text" 
    placeholder="Search stocks..." 
    [(ngModel)]="search" 
    (ngModelChange)="onSearchChange()" 
    class="search-input"
  />

  @if (loading) {
    <p>Loading stocks...</p>
  } @else {
    @for (stock of stocks; track stock.symbol) {
      <div 
        class="stock-item"
        (click)="selectStock(stock.symbol)">
        
        <h4>{{ stock.symbol }}</h4>
        <p>${{ stock.price | number:'1.2-2' }}</p>
        
        <p [ngClass]="{ 'positive': stock.change >= 0, 'negative': stock.change < 0 }">
          {{ stock.change | number:'1.2-2' }} ({{ stock.change_percent | percent:'1.1-1' }})
        </p>

        @if (stock.added) {
          <span class="in-portfolio">âœ“ In Portfolio</span>
        } @else {
          <button (click)="addToPortfolio(stock); $event.stopPropagation()">Add</button>
        }
      </div>
    }
  }
</div>
